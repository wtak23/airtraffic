


<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Study carriers.xls and airports new.xlt</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="stylesheet" href="_static/font-awesome-4.7.0/css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootswatch-3.3.6/flatly/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/copybutton.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="" href="index.html" />
    <link rel="up" title="Other Data munging (elbow grease required!)" href="data_munging.html" />
    <link rel="next" title="Test SVG and png figures" href="test.html" />
    <link rel="prev" title="BeautifulSoup to extract US State population" href="webscrape_beautifulsoup.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          US Airport Traffic Analysis</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="http://takwatanabe.me/resume.pdf"><i class="fa fa-spotify" aria-hidden="true"></i>&nbsp; resume</a></li>
                <li><a href="https://github.com/wtak23/airtraffic"><i class="fa fa-github" aria-hidden="true"></i>&nbsp; Codes</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Contents <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Project Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="flight-count-analysis.html">Part 1. Air-traffic Count Analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="flight-count-analysis.html#load-and-explore-dataset">Load and explore dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="flight-count-analysis.html#create-timeseries-of-daily-flight-counts">Create Timeseries of Daily Flight Counts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="flight-count-analysis.html#create-interactive-plot-with-plotly-cufflinks">Create interactive plot with plotly/cufflinks</a></li>
<li class="toctree-l3"><a class="reference internal" href="flight-count-analysis.html#study-seasonal-trend-with-rolling-averaged-timeseries">Study seasonal trend with rolling-averaged timeseries</a></li>
<li class="toctree-l3"><a class="reference internal" href="flight-count-analysis.html#narrow-focus-on-honolulu-airport">Narrow focus on Honolulu Airport</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="flight-count-analysis.html#flight-counts-study-by-day-of-week-and-month">Flight counts study by &#8220;day_of_week&#8221; and &#8220;month&#8221;</a><ul>
<li class="toctree-l3"><a class="reference internal" href="flight-count-analysis.html#over-entire-year-period">Over entire year period</a></li>
<li class="toctree-l3"><a class="reference internal" href="flight-count-analysis.html#pivoting-analysis-grouped-by-month-and-day-of-week">Pivoting: analysis grouped by month and day_of_week</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="flight-count-analysis.html#repeat-analysis-for-ny-la-and-vegas">Repeat analysis for NY, LA, and Vegas.</a><ul>
<li class="toctree-l3"><a class="reference internal" href="flight-count-analysis.html#data-tidying">Data tidying</a></li>
<li class="toctree-l3"><a class="reference internal" href="flight-count-analysis.html#plot-results">Plot results</a></li>
<li class="toctree-l3"><a class="reference internal" href="flight-count-analysis.html#create-sublots-of-monthly-flight-count-trends-for-each-city">Create sublots of monthly flight-count trends for each city</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="flight-count-analysis.html#which-state-had-the-most-air-traffics">Which state had the most air traffics?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="flight-count-analysis.html#id1">Data tidying</a></li>
<li class="toctree-l3"><a class="reference internal" href="flight-count-analysis.html#choropleth-figure-display-result-on-us-map">Choropleth figure (display result on US map)</a></li>
<li class="toctree-l3"><a class="reference internal" href="flight-count-analysis.html#choropleth-after-normalizing-over-state-population">Choropleth after normalizing over state population</a></li>
<li class="toctree-l3"><a class="reference internal" href="flight-count-analysis.html#ignore-nothing-interesting-normalized-flight-counts-at-different-month">(ignore, nothing interesting) Normalized flight-counts at different month?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="flight-count-analysis.html#most-frequently-used-airports">Most frequently used airports</a><ul>
<li class="toctree-l3"><a class="reference internal" href="flight-count-analysis.html#id2">Data tidying</a></li>
<li class="toctree-l3"><a class="reference internal" href="flight-count-analysis.html#id3">Plot results</a></li>
<li class="toctree-l3"><a class="reference internal" href="flight-count-analysis.html#display-results-on-us-map">Display results on US Map</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="regressing_out_weekday_effect.html">Part2: Holiday Detection via Flight-Residual Analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="regressing_out_weekday_effect.html#aim-of-this-notebook">Aim of this notebook</a></li>
<li class="toctree-l2"><a class="reference internal" href="regressing_out_weekday_effect.html#load-data-and-prepare-timeseries">Load data, and prepare Timeseries</a></li>
<li class="toctree-l2"><a class="reference internal" href="regressing_out_weekday_effect.html#regression-analysis-eliminate-effect-from-day-of-week">Regression analysis: eliminate effect from &#8220;day_of_week&#8221;</a><ul>
<li class="toctree-l3"><a class="reference internal" href="regressing_out_weekday_effect.html#fit-ols-model">Fit OLS model</a></li>
<li class="toctree-l3"><a class="reference internal" href="regressing_out_weekday_effect.html#analyze-residual-signal">Analyze residual signal</a></li>
<li class="toctree-l3"><a class="reference internal" href="regressing_out_weekday_effect.html#get-lagged-residual">Get &#8220;Lagged&#8221; residual</a></li>
<li class="toctree-l3"><a class="reference internal" href="regressing_out_weekday_effect.html#histograms-of-the-signals">Histograms of the signals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="regressing_out_weekday_effect.html#repeat-analysis-for-3-years-period">Repeat analysis for 3 years period</a><ul>
<li class="toctree-l3"><a class="reference internal" href="regressing_out_weekday_effect.html#try-overlaying-the-annual-plot">Try overlaying the annual plot</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="network_analysis.html">Part3: Network analysis of 2016 US Air Traffic</a><ul>
<li class="toctree-l2"><a class="reference internal" href="network_analysis.html#overview-network-view-of-the-us-airtraffic-system">Overview: network view of the US Airtraffic System</a></li>
<li class="toctree-l2"><a class="reference internal" href="network_analysis.html#create-the-network-edges-pairs-of-aiports-forming-the-trips">Create the network &#8220;edges&#8221; &#8212; pairs of aiports forming the trips</a><ul>
<li class="toctree-l3"><a class="reference internal" href="network_analysis.html#data-tidying">Data tidying</a></li>
<li class="toctree-l3"><a class="reference internal" href="network_analysis.html#most-frequent-trips-in-us-during-the-past-year">Most frequent &#8220;trips&#8221; in US during the past year</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="network_analysis.html#create-undirected-graph-edges-ignoring-directionality">Create undirected graph &#8211; edges ignoring directionality</a><ul>
<li class="toctree-l3"><a class="reference internal" href="network_analysis.html#id1">Data tidying</a></li>
<li class="toctree-l3"><a class="reference internal" href="network_analysis.html#most-frequent-routes-in-us-during-the-past-year">Most frequent &#8220;routes&#8221; in US during the past year</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="network_analysis.html#overview-complex-networt-study-of-the-us-airport-system">Overview: complex networt study of the US Airport System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="network_analysis.html#make-nx-graph-create-networkx-graph-object">make_nx_graph: create networkx graph object</a></li>
<li class="toctree-l3"><a class="reference internal" href="network_analysis.html#compute-network-measures-network-measures-characterizing-nodes-airport">compute_network_measures: network measures characterizing nodes (airport)</a></li>
<li class="toctree-l3"><a class="reference internal" href="network_analysis.html#other-helper-functions">Other helper functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="network_analysis.html#complex-network-theory-in-action">Complex network theory in action!</a><ul>
<li class="toctree-l3"><a class="reference internal" href="network_analysis.html#power-law-analysis-of-centrality-measures">Power law analysis of centrality measures</a></li>
<li class="toctree-l3"><a class="reference internal" href="network_analysis.html#pagerank-centrality-among-us-airports">PageRank Centrality among US Airports</a></li>
<li class="toctree-l3"><a class="reference internal" href="network_analysis.html#communities-detected-via-modularity-score">Communities Detected via Modularity Score</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="network_analysis.html#conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="data_munging.html">Other Data munging (elbow grease required!)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="create_lookup_table.html">Create lookup-table</a><ul>
<li class="toctree-l3"><a class="reference internal" href="create_lookup_table.html#aim-of-notebook">Aim of notebook</a></li>
<li class="toctree-l3"><a class="reference internal" href="create_lookup_table.html#load-the-main-airport-traffic-data">Load the main airport traffic data</a></li>
<li class="toctree-l3"><a class="reference internal" href="create_lookup_table.html#load-lookup-table-provided-by-bts">Load lookup table provided by BTS</a></li>
<li class="toctree-l3"><a class="reference internal" href="create_lookup_table.html#create-enhanced-lookuptable">Create <em>enhanced</em> lookuptable</a><ul>
<li class="toctree-l4"><a class="reference internal" href="create_lookup_table.html#remove-code-that-is-not-present-our-dataset">Remove Code that is not present our dataset</a></li>
<li class="toctree-l4"><a class="reference internal" href="create_lookup_table.html#parse-state-city-and-airport-name-from-description-field">Parse state,city, and airport-name from &#8216;Description&#8217; field</a></li>
<li class="toctree-l4"><a class="reference internal" href="create_lookup_table.html#add-state-region-information">Add state &#8216;region&#8217; information</a></li>
<li class="toctree-l4"><a class="reference internal" href="create_lookup_table.html#add-airport-latitude-and-longitude-information-using-geocoder">Add airport latitude and longitude information using geocoder</a></li>
<li class="toctree-l4"><a class="reference internal" href="create_lookup_table.html#add-column-with-both-city-and-state">Add column with both city and state</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="create_lookup_table.html#all-done-save-dataframe-on-disk">All done. Save dataframe on disk</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="webscrape_beautifulsoup.html">BeautifulSoup to extract US State population</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Study <code class="docutils literal"><span class="pre">carriers.xls</span></code> and <code class="docutils literal"><span class="pre">airports</span> <span class="pre">new.xlt</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#study-the-carrier-spreadsheet">Study the &#8220;carrier&#8221; spreadsheet</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sort-out-the-nan-values">sort out the &#8220;nan&#8221; values</a></li>
<li class="toctree-l4"><a class="reference internal" href="#filter-away-nans-from-the-dataframe">Filter away nans from the DataFrame</a></li>
<li class="toctree-l4"><a class="reference internal" href="#realized-some-code-is-treated-as-int-convert-to-string">Realized some <em>Code</em> is treated as int...convert to string</a></li>
<li class="toctree-l4"><a class="reference internal" href="#what-s-the-deal-with-the-1-appended-to-some-of-the-entries">What&#8217;s the deal with the (1) appended to some of the entries?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#study-airports-spreadsheet">Study <em>airports</em> spreadsheet</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#study-nans">Study nans</a></li>
<li class="toctree-l4"><a class="reference internal" href="#filter-out-non-usa-airports">Filter out non-USA airports</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#study-airports-state-distribution">Study &#8220;airports&#8221; state distribution</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#plot-bubble-markers-for-all-airports">Plot bubble markers for all airports</a></li>
<li class="toctree-l4"><a class="reference internal" href="#take-a-closer-look-at-michigan-my-home-state">Take a closer look at Michigan, my home state</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="test.html">Test SVG and png figures</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">page-contents <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Study <code class="docutils literal"><span class="pre">carriers.xls</span></code> and <code class="docutils literal"><span class="pre">airports</span> <span class="pre">new.xlt</span></code></a><ul>
<li><a class="reference internal" href="#study-the-carrier-spreadsheet">Study the &#8220;carrier&#8221; spreadsheet</a><ul>
<li><a class="reference internal" href="#sort-out-the-nan-values">sort out the &#8220;nan&#8221; values</a></li>
<li><a class="reference internal" href="#filter-away-nans-from-the-dataframe">Filter away nans from the DataFrame</a></li>
<li><a class="reference internal" href="#realized-some-code-is-treated-as-int-convert-to-string">Realized some <em>Code</em> is treated as int...convert to string</a></li>
<li><a class="reference internal" href="#what-s-the-deal-with-the-1-appended-to-some-of-the-entries">What&#8217;s the deal with the (1) appended to some of the entries?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#study-airports-spreadsheet">Study <em>airports</em> spreadsheet</a><ul>
<li><a class="reference internal" href="#study-nans">Study nans</a></li>
<li><a class="reference internal" href="#filter-out-non-usa-airports">Filter out non-USA airports</a></li>
</ul>
</li>
<li><a class="reference internal" href="#study-airports-state-distribution">Study &#8220;airports&#8221; state distribution</a><ul>
<li><a class="reference internal" href="#plot-bubble-markers-for-all-airports">Plot bubble markers for all airports</a></li>
<li><a class="reference internal" href="#take-a-closer-look-at-michigan-my-home-state">Take a closer look at Michigan, my home state</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="study-carriers-xls-and-airports-new-xlt">
<h1>Study <code class="docutils literal"><span class="pre">carriers.xls</span></code> and <code class="docutils literal"><span class="pre">airports</span> <span class="pre">new.xlt</span></code></h1>
<p>Preliminary data analysis with the spreadsheets <code class="docutils literal"><span class="pre">carriers.xls</span></code> and <code class="docutils literal"><span class="pre">airports</span> <span class="pre">new.xlt</span></code>.</p>
<p>The original ipython notebook can be downloaded from <a class="reference external" href="http://nbviewer.jupyter.org/github/wtak23/airtraffic/blob/master/draft_scripts/spotify_0105a.ipynb">here</a> .</p>
<div class="contents local topic" id="contents">
<p class="topic-title first"><cite>Contents</cite></p>
<ul class="simple">
<li><a class="reference internal" href="#study-the-carrier-spreadsheet" id="id1">Study the &#8220;carrier&#8221; spreadsheet</a><ul>
<li><a class="reference internal" href="#sort-out-the-nan-values" id="id2">sort out the &#8220;nan&#8221; values</a></li>
<li><a class="reference internal" href="#filter-away-nans-from-the-dataframe" id="id3">Filter away nans from the DataFrame</a></li>
<li><a class="reference internal" href="#realized-some-code-is-treated-as-int-convert-to-string" id="id4">Realized some <em>Code</em> is treated as int...convert to string</a></li>
<li><a class="reference internal" href="#what-s-the-deal-with-the-1-appended-to-some-of-the-entries" id="id5">What&#8217;s the deal with the (1) appended to some of the entries?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#study-airports-spreadsheet" id="id6">Study <em>airports</em> spreadsheet</a><ul>
<li><a class="reference internal" href="#study-nans" id="id7">Study nans</a></li>
<li><a class="reference internal" href="#filter-out-non-usa-airports" id="id8">Filter out non-USA airports</a></li>
</ul>
</li>
<li><a class="reference internal" href="#study-airports-state-distribution" id="id9">Study &#8220;airports&#8221; state distribution</a><ul>
<li><a class="reference internal" href="#plot-bubble-markers-for-all-airports" id="id10">Plot bubble markers for all airports</a></li>
<li><a class="reference internal" href="#take-a-closer-look-at-michigan-my-home-state" id="id11">Take a closer look at Michigan, my home state</a></li>
</ul>
</li>
</ul>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="kn">as</span> <span class="nn">py</span>

<span class="kn">from</span> <span class="nn">geopy.geocoders</span> <span class="kn">import</span> <span class="n">Nominatim</span>
<span class="n">geolocator</span> <span class="o">=</span> <span class="n">Nominatim</span><span class="p">()</span>

<span class="c1"># limit output to avoid cluttering screen</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">max_rows</span> <span class="o">=</span> <span class="mi">10</span>
</pre></div>
</div>
<div class="section" id="study-the-carrier-spreadsheet">
<h2><a class="toc-backref" href="#id1">Study the &#8220;carrier&#8221; spreadsheet</a></h2>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">df_carr</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;../data/carriers.xls&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="s2">&quot;df_carr.shape = &quot;</span><span class="p">,</span><span class="n">df_carr</span><span class="o">.</span><span class="n">shape</span>
<span class="k">print</span> <span class="n">df_carr</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">df_carr</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
</pre></div>
</div>
<div class="myliteral highlight-python"><div class="highlight"><pre><span></span><span class="n">df_carr</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span>  <span class="p">(</span><span class="mi">2982</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">[</span><span class="s1">u&#39;Code&#39;</span><span class="p">,</span> <span class="s1">u&#39;Description&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>02Q</td>
      <td>Titan Airways</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>04Q</td>
      <td>Tradewind Aviation</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>10</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>11</th>
      <td>09Q</td>
      <td>Swift Air, LLC</td>
    </tr>
    <tr>
      <th>12</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>13</th>
      <td>0BQ</td>
      <td>DCA</td>
    </tr>
    <tr>
      <th>14</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>15 rows × 2 columns</p>
</div><div class="section" id="sort-out-the-nan-values">
<h3><a class="toc-backref" href="#id2">sort out the &#8220;nan&#8221; values</a></h3>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">df_carr</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span>
</pre></div>
</div>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>True</td>
      <td>True</td>
    </tr>
    <tr>
      <th>1</th>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>2</th>
      <td>True</td>
      <td>True</td>
    </tr>
    <tr>
      <th>3</th>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>4</th>
      <td>True</td>
      <td>True</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2977</th>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>2978</th>
      <td>True</td>
      <td>True</td>
    </tr>
    <tr>
      <th>2979</th>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>2980</th>
      <td>True</td>
      <td>True</td>
    </tr>
    <tr>
      <th>2981</th>
      <td>False</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
<p>2982 rows × 2 columns</p>
</div><p>... appears like every-other rows are nans</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">df_carr</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
<div class="myliteral highlight-python"><div class="highlight"><pre><span></span>Code           1492
Description    1491
dtype: int64
</pre></div>
</div>
<p>... one airline has extra nan values in the &#8220;Code&#8221; column.... anything
special about that entry?</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="c1"># which record/row has Code NaN</span>
<span class="n">_idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df_carr</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

<span class="n">df_carr</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">_idx</span><span class="p">]</span>
</pre></div>
</div>
<div class="myliteral highlight-python"><div class="highlight"><pre><span></span>Code                               NaN
Description    North American Airlines
Name: 1747, dtype: object
</pre></div>
</div>
<p>...so nothing exactly special looking...</p>
</div>
<div class="section" id="filter-away-nans-from-the-dataframe">
<h3><a class="toc-backref" href="#id3">Filter away nans from the DataFrame</a></h3>
<ul class="simple">
<li>remove row with <em>any</em> nans</li>
</ul>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">df_carr</span> <span class="o">=</span> <span class="n">df_carr</span><span class="p">[</span><span class="o">~</span><span class="n">df_carr</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span>
<span class="k">print</span> <span class="s2">&quot;df_carr.shape = &quot;</span><span class="p">,</span><span class="n">df_carr</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
<div class="myliteral highlight-python"><div class="highlight"><pre><span></span><span class="n">df_carr</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span>  <span class="p">(</span><span class="mi">1490</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="c1"># all record appears to be unique</span>
<span class="k">print</span> <span class="n">df_carr</span><span class="p">[</span><span class="s1">&#39;Code&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span>
<span class="k">print</span> <span class="n">df_carr</span><span class="p">[</span><span class="s1">&#39;Description&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
<div class="myliteral highlight-python"><div class="highlight"><pre><span></span><span class="p">(</span><span class="il">1490L</span><span class="p">,)</span>
<span class="p">(</span><span class="il">1490L</span><span class="p">,)</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">df_carr</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>02Q</td>
      <td>Titan Airways</td>
    </tr>
    <tr>
      <th>3</th>
      <td>04Q</td>
      <td>Tradewind Aviation</td>
    </tr>
    <tr>
      <th>5</th>
      <td>05Q</td>
      <td>Comlux Aviation, AG</td>
    </tr>
    <tr>
      <th>7</th>
      <td>06Q</td>
      <td>Master Top Linhas Aereas Ltd.</td>
    </tr>
    <tr>
      <th>9</th>
      <td>07Q</td>
      <td>Flair Airlines Ltd.</td>
    </tr>
    <tr>
      <th>11</th>
      <td>09Q</td>
      <td>Swift Air, LLC</td>
    </tr>
    <tr>
      <th>13</th>
      <td>0BQ</td>
      <td>DCA</td>
    </tr>
    <tr>
      <th>15</th>
      <td>0CQ</td>
      <td>ACM AIR CHARTER GmbH</td>
    </tr>
    <tr>
      <th>17</th>
      <td>0FQ</td>
      <td>Maine Aviation Aircraft Charter, LLC</td>
    </tr>
    <tr>
      <th>19</th>
      <td>0GQ</td>
      <td>Inter Island Airways, d/b/a Inter Island Air</td>
    </tr>
  </tbody>
</table>
</div><div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="c1"># reset index</span>
<span class="n">df_carr</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="realized-some-code-is-treated-as-int-convert-to-string">
<h3><a class="toc-backref" href="#id4">Realized some <em>Code</em> is treated as int...convert to string</a></h3>
<ul class="simple">
<li>d</li>
</ul>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="c1"># convert columns to unicode (realized some elements are treated as &#39;int&#39;, which messes up some string tests below</span>
<span class="n">df_carr</span><span class="p">[</span><span class="s1">&#39;Code&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_carr</span><span class="p">[</span><span class="s1">&#39;Code&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">unicode</span><span class="p">)</span>
<span class="n">df_carr</span><span class="p">[</span><span class="s1">&#39;Description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_carr</span><span class="p">[</span><span class="s1">&#39;Description&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">unicode</span><span class="p">)</span>
<span class="c1">#df_carr[&#39;Code&#39;] = df_carr[&#39;Code&#39;].apply(str)</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">df_carr</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
<div class="myliteral highlight-python"><div class="highlight"><pre><span></span>Code           object
Description    object
dtype: object
</pre></div>
</div>
</div>
<div class="section" id="what-s-the-deal-with-the-1-appended-to-some-of-the-entries">
<h3><a class="toc-backref" href="#id5">What&#8217;s the deal with the (1) appended to some of the entries?</a></h3>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">mask1</span> <span class="o">=</span> <span class="n">df_carr</span><span class="p">[</span><span class="s1">&#39;Code&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;(1)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
<span class="n">mask2</span> <span class="o">=</span> <span class="n">df_carr</span><span class="p">[</span><span class="s1">&#39;Description&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;(1)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>

<span class="n">df_carr</span><span class="p">[</span><span class="n">mask1</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>34</th>
      <td>4E (1)</td>
      <td>British Airtours Limited</td>
    </tr>
    <tr>
      <th>37</th>
      <td>4M (1)</td>
      <td>Lan Dominica</td>
    </tr>
    <tr>
      <th>41</th>
      <td>4S (1)</td>
      <td>Conner Air Lines Inc.</td>
    </tr>
    <tr>
      <th>50</th>
      <td>5G (1)</td>
      <td>Queen Air</td>
    </tr>
    <tr>
      <th>66</th>
      <td>7G (1)</td>
      <td>Bellair Inc. (1)</td>
    </tr>
  </tbody>
</table>
</div><div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">df_carr</span><span class="p">[</span><span class="n">mask2</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>66</th>
      <td>7G (1)</td>
      <td>Bellair Inc. (1)</td>
    </tr>
    <tr>
      <th>130</th>
      <td>ACT</td>
      <td>Air Central Inc. (1)</td>
    </tr>
    <tr>
      <th>231</th>
      <td>ASU</td>
      <td>Air South (1)</td>
    </tr>
    <tr>
      <th>292</th>
      <td>BHQ</td>
      <td>Turks Air Ltd. (1)</td>
    </tr>
    <tr>
      <th>407</th>
      <td>CSN</td>
      <td>Casino Airlines (1)</td>
    </tr>
  </tbody>
</table>
</div><div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="c1"># more informative to print row just before...</span>

<span class="k">def</span> <span class="nf">interleave_index</span><span class="p">(</span><span class="n">mask</span><span class="p">):</span>
    <span class="n">ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">mask</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">ind</span><span class="p">,</span><span class="n">ind</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">ind</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">ind</span>

<span class="n">df_carr</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">interleave_index</span><span class="p">(</span><span class="n">mask1</span><span class="p">)]</span>
</pre></div>
</div>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>33</th>
      <td>4E</td>
      <td>Tanana Air Service</td>
    </tr>
    <tr>
      <th>34</th>
      <td>4E (1)</td>
      <td>British Airtours Limited</td>
    </tr>
    <tr>
      <th>36</th>
      <td>4M</td>
      <td>LAN Argentina</td>
    </tr>
    <tr>
      <th>37</th>
      <td>4M (1)</td>
      <td>Lan Dominica</td>
    </tr>
    <tr>
      <th>40</th>
      <td>4S</td>
      <td>Sol Air (Aero Hunduras)</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1396</th>
      <td>WS (1)</td>
      <td>Suncoast Airlines Inc.</td>
    </tr>
    <tr>
      <th>1466</th>
      <td>Z3</td>
      <td>PM Air, LLC</td>
    </tr>
    <tr>
      <th>1467</th>
      <td>Z3 (1)</td>
      <td>Promech</td>
    </tr>
    <tr>
      <th>1486</th>
      <td>ZX</td>
      <td>Air Georgian</td>
    </tr>
    <tr>
      <th>1487</th>
      <td>ZX (1)</td>
      <td>Airbc Ltd.</td>
    </tr>
  </tbody>
</table>
<p>114 rows × 2 columns</p>
</div><div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">df_carr</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">interleave_index</span><span class="p">(</span><span class="n">mask2</span><span class="p">)]</span>
</pre></div>
</div>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>65</th>
      <td>7G</td>
      <td>MK Airlines Ltd.</td>
    </tr>
    <tr>
      <th>66</th>
      <td>7G (1)</td>
      <td>Bellair Inc. (1)</td>
    </tr>
    <tr>
      <th>129</th>
      <td>ACS</td>
      <td>Alamo Commuter Airlines</td>
    </tr>
    <tr>
      <th>130</th>
      <td>ACT</td>
      <td>Air Central Inc. (1)</td>
    </tr>
    <tr>
      <th>230</th>
      <td>AST</td>
      <td>Astro Airways</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1305</th>
      <td>UR</td>
      <td>Empire Airlines Inc. (1)</td>
    </tr>
    <tr>
      <th>1401</th>
      <td>WTA</td>
      <td>Westates Airlines</td>
    </tr>
    <tr>
      <th>1402</th>
      <td>WV</td>
      <td>Air South Inc. (1)</td>
    </tr>
    <tr>
      <th>1437</th>
      <td>XBZ</td>
      <td>Air Natl Aircraft Sal &amp; Ser</td>
    </tr>
    <tr>
      <th>1438</th>
      <td>XC</td>
      <td>Air Caribbean (1)</td>
    </tr>
  </tbody>
</table>
<p>38 rows × 2 columns</p>
</div></div>
</div>
<div class="section" id="study-airports-spreadsheet">
<h2><a class="toc-backref" href="#id6">Study <em>airports</em> spreadsheet</a></h2>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">df_airports</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;../data/airports new.xlt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="k">print</span> <span class="s2">&quot;df_airports.shape = &quot;</span><span class="p">,</span><span class="n">df_airports</span><span class="o">.</span><span class="n">shape</span>
<span class="k">print</span> <span class="n">df_airports</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
<div class="myliteral highlight-python"><div class="highlight"><pre><span></span>df_airports.shape =  (3376, 7)
iata        object
airport     object
city        object
state       object
country     object
lat        float64
long       float64
dtype: object
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">df_airports</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>iata</th>
      <th>airport</th>
      <th>city</th>
      <th>state</th>
      <th>country</th>
      <th>lat</th>
      <th>long</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>00M</td>
      <td>Thigpen</td>
      <td>Bay Springs</td>
      <td>MS</td>
      <td>USA</td>
      <td>31.953765</td>
      <td>-89.234505</td>
    </tr>
    <tr>
      <th>1</th>
      <td>00R</td>
      <td>Livingston Municipal</td>
      <td>Livingston</td>
      <td>TX</td>
      <td>USA</td>
      <td>30.685861</td>
      <td>-95.017928</td>
    </tr>
    <tr>
      <th>2</th>
      <td>00V</td>
      <td>Meadow Lake</td>
      <td>Colorado Springs</td>
      <td>CO</td>
      <td>USA</td>
      <td>38.945749</td>
      <td>-104.569893</td>
    </tr>
    <tr>
      <th>3</th>
      <td>01G</td>
      <td>Perry-Warsaw</td>
      <td>Perry</td>
      <td>NY</td>
      <td>USA</td>
      <td>42.741347</td>
      <td>-78.052081</td>
    </tr>
    <tr>
      <th>4</th>
      <td>01J</td>
      <td>Hilliard Airpark</td>
      <td>Hilliard</td>
      <td>FL</td>
      <td>USA</td>
      <td>30.688012</td>
      <td>-81.905944</td>
    </tr>
    <tr>
      <th>5</th>
      <td>01M</td>
      <td>Tishomingo County</td>
      <td>Belmont</td>
      <td>MS</td>
      <td>USA</td>
      <td>34.491667</td>
      <td>-88.201111</td>
    </tr>
    <tr>
      <th>6</th>
      <td>02A</td>
      <td>Gragg-Wade</td>
      <td>Clanton</td>
      <td>AL</td>
      <td>USA</td>
      <td>32.850487</td>
      <td>-86.611453</td>
    </tr>
    <tr>
      <th>7</th>
      <td>02C</td>
      <td>Capitol</td>
      <td>Brookfield</td>
      <td>WI</td>
      <td>USA</td>
      <td>43.087510</td>
      <td>-88.177869</td>
    </tr>
    <tr>
      <th>8</th>
      <td>02G</td>
      <td>Columbiana County</td>
      <td>East Liverpool</td>
      <td>OH</td>
      <td>USA</td>
      <td>40.673313</td>
      <td>-80.641406</td>
    </tr>
    <tr>
      <th>9</th>
      <td>03D</td>
      <td>Memphis Memorial</td>
      <td>Memphis</td>
      <td>MO</td>
      <td>USA</td>
      <td>40.447259</td>
      <td>-92.226961</td>
    </tr>
  </tbody>
</table>
</div><div class="section" id="study-nans">
<h3><a class="toc-backref" href="#id7">Study nans</a></h3>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="c1"># any nans?</span>
<span class="n">df_airports</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
<div class="myliteral highlight-python"><div class="highlight"><pre><span></span>iata        0
airport     0
city       12
state      12
country     0
lat         0
long        0
dtype: int64
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="c1"># do the nans occur at the same place?</span>
<span class="c1">#| yes</span>
<span class="n">np</span><span class="o">.</span><span class="n">alltrue</span><span class="p">(</span>
    <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df_airports</span><span class="p">[</span><span class="s1">&#39;city&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> \
    <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df_airports</span><span class="p">[</span><span class="s1">&#39;state&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="myliteral highlight-python"><div class="highlight"><pre><span></span><span class="bp">True</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="c1"># anything special about the records with unknown city/state?</span>
<span class="n">df_airports</span><span class="p">[</span><span class="n">df_airports</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span>
</pre></div>
</div>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>iata</th>
      <th>airport</th>
      <th>city</th>
      <th>state</th>
      <th>country</th>
      <th>lat</th>
      <th>long</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1136</th>
      <td>CLD</td>
      <td>MC Clellan-Palomar Airport</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>USA</td>
      <td>33.127231</td>
      <td>-117.278727</td>
    </tr>
    <tr>
      <th>1715</th>
      <td>HHH</td>
      <td>Hilton Head</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>USA</td>
      <td>32.224384</td>
      <td>-80.697629</td>
    </tr>
    <tr>
      <th>2251</th>
      <td>MIB</td>
      <td>Minot AFB</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>USA</td>
      <td>48.415769</td>
      <td>-101.358039</td>
    </tr>
    <tr>
      <th>2312</th>
      <td>MQT</td>
      <td>Marquette County Airport</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>USA</td>
      <td>46.353639</td>
      <td>-87.395361</td>
    </tr>
    <tr>
      <th>2752</th>
      <td>RCA</td>
      <td>Ellsworth AFB</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>USA</td>
      <td>44.145094</td>
      <td>-103.103567</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2795</th>
      <td>ROR</td>
      <td>Babelthoup/Koror</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Palau</td>
      <td>7.367222</td>
      <td>134.544167</td>
    </tr>
    <tr>
      <th>2900</th>
      <td>SCE</td>
      <td>University Park</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>USA</td>
      <td>40.851206</td>
      <td>-77.846302</td>
    </tr>
    <tr>
      <th>2964</th>
      <td>SKA</td>
      <td>Fairchild AFB</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>USA</td>
      <td>47.615058</td>
      <td>-117.655803</td>
    </tr>
    <tr>
      <th>3001</th>
      <td>SPN</td>
      <td>Tinian International Airport</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>N Mariana Islands</td>
      <td>14.996111</td>
      <td>145.621384</td>
    </tr>
    <tr>
      <th>3355</th>
      <td>YAP</td>
      <td>Yap International</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Federated States of Micronesia</td>
      <td>9.516700</td>
      <td>138.100000</td>
    </tr>
  </tbody>
</table>
<p>12 rows × 7 columns</p>
</div><div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="c1"># most of the data are from USA...the 4 cases corresponds to the NANs above</span>
<span class="n">df_airports</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<div class="myliteral highlight-python"><div class="highlight"><pre><span></span>USA                               3372
Palau                                1
N Mariana Islands                    1
Thailand                             1
Federated States of Micronesia       1
Name: country, dtype: int64
</pre></div>
</div>
</div>
<div class="section" id="filter-out-non-usa-airports">
<h3><a class="toc-backref" href="#id8">Filter out non-USA airports</a></h3>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">df_airports</span> <span class="o">=</span> <span class="n">df_airports</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;country == &quot;USA&quot;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">df_airports</span><span class="o">.</span><span class="n">country</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
<div class="myliteral highlight-python"><div class="highlight"><pre><span></span><span class="n">array</span><span class="p">([</span><span class="s1">u&#39;USA&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="study-airports-state-distribution">
<h2><a class="toc-backref" href="#id9">Study &#8220;airports&#8221; state distribution</a></h2>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">df_state</span> <span class="o">=</span> <span class="n">df_airports</span><span class="p">[</span><span class="s1">&#39;state&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="n">df_state</span> <span class="o">=</span> <span class="n">df_state</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">df_state</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;state&#39;</span><span class="p">,</span><span class="s1">&#39;counts&#39;</span><span class="p">]</span>
<span class="n">df_state</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
      <th>9</th>
      <th>...</th>
      <th>46</th>
      <th>47</th>
      <th>48</th>
      <th>49</th>
      <th>50</th>
      <th>51</th>
      <th>52</th>
      <th>53</th>
      <th>54</th>
      <th>55</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>state</th>
      <td>AK</td>
      <td>TX</td>
      <td>CA</td>
      <td>OK</td>
      <td>FL</td>
      <td>OH</td>
      <td>NY</td>
      <td>GA</td>
      <td>MI</td>
      <td>MN</td>
      <td>...</td>
      <td>NH</td>
      <td>VT</td>
      <td>PR</td>
      <td>RI</td>
      <td>DE</td>
      <td>VI</td>
      <td>CQ</td>
      <td>AS</td>
      <td>GU</td>
      <td>DC</td>
    </tr>
    <tr>
      <th>counts</th>
      <td>263</td>
      <td>209</td>
      <td>205</td>
      <td>102</td>
      <td>100</td>
      <td>100</td>
      <td>97</td>
      <td>97</td>
      <td>94</td>
      <td>89</td>
      <td>...</td>
      <td>14</td>
      <td>13</td>
      <td>11</td>
      <td>6</td>
      <td>5</td>
      <td>5</td>
      <td>4</td>
      <td>3</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>2 rows × 56 columns</p>
</div><div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="c1"># define data/trace object</span>
<span class="n">trace</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;choropleth&#39;</span><span class="p">,</span>
        <span class="n">autocolorscale</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
        <span class="n">locations</span> <span class="o">=</span> <span class="n">df_state</span><span class="p">[</span><span class="s1">&#39;state&#39;</span><span class="p">],</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">df_state</span><span class="p">[</span><span class="s1">&#39;counts&#39;</span><span class="p">],</span>
        <span class="n">locationmode</span> <span class="o">=</span> <span class="s1">&#39;USA-states&#39;</span><span class="p">,</span>
        <span class="n">marker</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">line</span> <span class="o">=</span> <span class="nb">dict</span> <span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;rgb(255,255,255)&#39;</span><span class="p">,</span><span class="n">width</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">),</span>
        <span class="n">colorbar</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;counts&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">trace</span><span class="p">]</span>

<span class="c1"># define layout object</span>
<span class="n">geo</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s1">&#39;usa&#39;</span><span class="p">,</span>
           <span class="n">projection</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;albers usa&#39;</span> <span class="p">),</span>
           <span class="n">showlakes</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
           <span class="n">lakecolor</span> <span class="o">=</span> <span class="s1">&#39;rgb(255, 255, 255)&#39;</span><span class="p">)</span>
<span class="n">layout</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">geo</span><span class="o">=</span><span class="n">geo</span><span class="p">,</span>
              <span class="n">margin</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">l</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">r</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">t</span><span class="o">=</span><span class="mi">40</span><span class="p">),</span>
              <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;State Frequency chart (hover over for number)&#39;</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span> <span class="p">)</span>
<span class="c1"># py.iplot( fig, filename=&#39;d3-cloropleth-map&#39; )</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span> <span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;spotify-tmp1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<iframe id="igraph" scrolling="no" style="border:none;" seamless="seamless" src="https://plot.ly/~takanori/1345.embed?share_key=HXSygiLDpJTyDMXMN7lIa6&link=false" height="525px" width="100%"></iframe><p>From the above plot, it looks like the number of aiports in a state is
proportional to the land-area of the state...</p>
<div class="section" id="plot-bubble-markers-for-all-airports">
<h3><a class="toc-backref" href="#id10">Plot bubble markers for all airports</a></h3>
<p>This will give an idea of the airport distribution around the country</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;scattergeo&#39;</span><span class="p">,</span>
        <span class="n">locationmode</span> <span class="o">=</span> <span class="s1">&#39;USA-states&#39;</span><span class="p">,</span>
        <span class="n">lon</span> <span class="o">=</span> <span class="n">df_airports</span><span class="p">[</span><span class="s1">&#39;long&#39;</span><span class="p">],</span>
        <span class="n">lat</span> <span class="o">=</span> <span class="n">df_airports</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">],</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">df_airports</span><span class="p">[</span><span class="s1">&#39;airport&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">df_airports</span><span class="p">[</span><span class="s1">&#39;city&#39;</span><span class="p">],</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;markers&#39;</span><span class="p">,</span>
        <span class="n">marker</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">size</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
            <span class="n">opacity</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
            <span class="n">reversescale</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
            <span class="n">symbol</span> <span class="o">=</span> <span class="s1">&#39;circle&#39;</span><span class="p">,</span>
            <span class="n">line</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
                <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="s1">&#39;rgba(102, 102, 102)&#39;</span>
            <span class="p">),</span>
            <span class="n">autocolorscale</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
        <span class="p">))]</span>

<span class="n">layout</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Airports in the United States&lt;br&gt;(Scroll mouse to zoom)&#39;</span><span class="p">,</span>
        <span class="n">colorbar</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
        <span class="n">margin</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">l</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">r</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">t</span><span class="o">=</span><span class="mi">40</span><span class="p">),</span>
        <span class="n">geo</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">scope</span><span class="o">=</span><span class="s1">&#39;usa&#39;</span><span class="p">,</span>
            <span class="n">projection</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;albers usa&#39;</span> <span class="p">),</span>
            <span class="n">showland</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
            <span class="n">showlakes</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span> <span class="p">)</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span> <span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;spotify-tmp2&#39;</span><span class="p">,</span><span class="n">validate</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<iframe id="igraph" scrolling="no" style="border:none;" seamless="seamless" src="https://plot.ly/~takanori/1349.embed?link=false&share_key=lPM6X5p9K50zOVqNgTUPqg" height="525px" width="100%"></iframe><p><strong>Some personal remarks</strong></p>
<ul class="simple">
<li>airport-density is high in the Northeastern regions, which was
expected, as these are economically developed and densely populated
region.</li>
<li>airport-density in the Western area is low outside of California,
which was again expected.</li>
<li>I did not expect that there are so many airports in Alaska!</li>
</ul>
</div>
<div class="section" id="take-a-closer-look-at-michigan-my-home-state">
<h3><a class="toc-backref" href="#id11">Take a closer look at Michigan, my home state</a></h3>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">df_airports</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;state==&quot;MI&quot;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>iata</th>
      <th>airport</th>
      <th>city</th>
      <th>state</th>
      <th>country</th>
      <th>lat</th>
      <th>long</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>23</th>
      <td>07G</td>
      <td>Fitch H Beach</td>
      <td>Charlotte</td>
      <td>MI</td>
      <td>USA</td>
      <td>42.574509</td>
      <td>-84.811431</td>
    </tr>
    <tr>
      <th>45</th>
      <td>0D1</td>
      <td>South Haven Municipal</td>
      <td>South Haven</td>
      <td>MI</td>
      <td>USA</td>
      <td>42.350833</td>
      <td>-86.256139</td>
    </tr>
    <tr>
      <th>106</th>
      <td>13C</td>
      <td>Lakeview</td>
      <td>Lakeview</td>
      <td>MI</td>
      <td>USA</td>
      <td>43.452137</td>
      <td>-85.264803</td>
    </tr>
    <tr>
      <th>143</th>
      <td>1D2</td>
      <td>Canton -Plymouth -  Mettetal</td>
      <td>Plymouth</td>
      <td>MI</td>
      <td>USA</td>
      <td>42.350037</td>
      <td>-83.458268</td>
    </tr>
    <tr>
      <th>302</th>
      <td>35D</td>
      <td>Padgham</td>
      <td>Allegan</td>
      <td>MI</td>
      <td>USA</td>
      <td>42.530983</td>
      <td>-85.825136</td>
    </tr>
  </tbody>
</table>
</div><div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">df_mi</span> <span class="o">=</span> <span class="n">df_airports</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;state==&quot;MI&quot;&#39;</span><span class="p">)</span>

<span class="c1"># update dict appropriately</span>
<span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_mi</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;lon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_mi</span><span class="p">[</span><span class="s1">&#39;long&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_mi</span><span class="p">[</span><span class="s1">&#39;airport&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">df_mi</span><span class="p">[</span><span class="s1">&#39;city&#39;</span><span class="p">]</span>

<span class="n">layout</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Airports in Michigan&lt;br&gt;(Hover for airport names. Mouse scroll to zoom, right-click to pan)&#39;</span>
<span class="n">layout</span><span class="p">[</span><span class="s1">&#39;geo&#39;</span><span class="p">][</span><span class="s1">&#39;projection&#39;</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">fig</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span> <span class="p">)</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span> <span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;spotify-tmp3&#39;</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<iframe id="igraph" scrolling="no" style="border:none;" seamless="seamless" src="https://plot.ly/~takanori/1351.embed?link=false&share_key=boE8CXijf20MKcLBq8PbW9&link=false" height="525px" width="100%"></iframe></div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>